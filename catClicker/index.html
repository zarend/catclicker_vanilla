<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Cat Clicker</title>
    <script type="text/javascript">
      var CatModel = (function() {
        var CatModel = function(cats) {
          this.cats = cats || [];

          for (var idx in cats) {
            (function(idx) {
              cats[idx].count = 0;
            })(idx);
          }
        }

        CatModel.prototype.incrementCatCount = function(idx) {
          this.cats[idx].count++;
        }

        return CatModel;
      })();

      var catModel = new CatModel([
        {name: 'cat', img: 'cat.jpg'},
        {name: 'nextCat', img: 'cat2.jpg'},
        {name: 'burrito', img: 'burrito.jpg'},
        {name: 'bullet', img: 'bullet.jpg'},
        {name: 'prayer', img: 'praying.jpg'},
      ]);

      var handleLoad = function() {
        var list = document.getElementById('list');
        var displayArea = document.getElementById('displayArea');
        var name = document.getElementById('name');
        var pic = document.getElementById('pic');
        var count = document.getElementById('count');

        var selectedCatIdx = 0;

        pic.addEventListener('click', function() {
          catModel.incrementCatCount(selectedCatIdx);
          displayCat(selectedCatIdx)
        })

        var displayCat = function(catIdx) {
          selectedCatIdx = catIdx;
          var cat = catModel.cats[catIdx];
          name.innerHTML = cat.name;
          pic.src = 'img/' + cat.img;
          count.innerHTML = cat.count;
        }

        for (var idx in catModel.cats) {
          (function(idx) {
            var nextCat = catModel.cats[idx];
            var catPicker = document.createElement('div');
            catPicker.innerHTML = nextCat.name;
            catPicker.addEventListener('click', function() {
              displayCat(idx);
            });
            list.appendChild(catPicker);
          })(idx);
        }
      } 
    </script>
  </head>
  <body onload="handleLoad()">
    <h1> Welcome to Cat Clicker! </h1>
    <div id="list">
    </div>
    <div id="displayArea">
      <h6 id="name"> </h6>
      <img id="pic">
      <h6> <span id="count"> </span> clicks</h6>
    </div>
  <body>
</html>
